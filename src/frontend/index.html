<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>KromaVerse - Collaborative Pixel Canvas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes" />
  <meta name="description" content="KromaVerse - A collaborative pixel art canvas where creativity meets community" />
  <meta name="theme-color" content="#ff6b9d" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <link rel="stylesheet" href="main.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <script defer src="/socket.io/socket.io.js"></script>
  <script defer src="main.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <span class="brand-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-label="Palette">
          <circle cx="12" cy="12" r="10" />
          <path d="M7 10a2 2 0 1 1 0-4" />
          <path d="M12 8a2 2 0 1 1 0-4" />
          <path d="M17 10a2 2 0 1 1 0-4" />
          <path d="M15 16c0 1.5-1.2 2-2.5 2H12a3 3 0 0 1 0-6h1.5a3.5 3.5 0 0 1 3.5 3.5" />
        </svg>
      </span>
      <span class="brand-text">KromaVerse</span>
    </div>
    <nav class="menu">
      <a href="/info" class="menu-link" aria-label="Info">
        <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <circle cx="12" cy="12" r="10" />
          <line x1="12" y1="10" x2="12" y2="16" />
          <circle cx="12" cy="7" r="1" />
        </svg>
        <span>Info</span>
      </a>
      <a href="/docs" class="menu-link" aria-label="Docs">
        <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M7 2h8l5 5v13a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z" />
          <path d="M15 2v5h5" />
        </svg>
        <span>Docs</span>
      </a>
      <a href="https://github.com/sea-deep/kromaverse" target="_blank" rel="noopener noreferrer" class="menu-link" aria-label="GitHub">
        <svg class="menu-icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M12 2C6.48 2 2 6.58 2 12.14c0 4.47 2.87 8.26 6.84 9.62.5.1.68-.22.68-.48 0-.24-.01-.87-.01-1.71-2.78.62-3.37-1.36-3.37-1.36-.45-1.17-1.11-1.48-1.11-1.48-.91-.63.07-.62.07-.62 1 .07 1.53 1.06 1.53 1.06.9 1.57 2.36 1.12 2.94.86.09-.67.35-1.12.63-1.38-2.22-.26-4.56-1.13-4.56-5 0-1.11.39-2.02 1.03-2.73-.1-.26-.45-1.3.1-2.71 0 0 .84-.27 2.75 1.04a9.38 9.38 0 0 1 5 0c1.9-1.31 2.74-1.04 2.74-1.04.55 1.41.2 2.45.1 2.71.64.71 1.03 1.62 1.03 2.73 0 3.88-2.34 4.74-4.57 4.99.36.32.68.95.68 1.92 0 1.39-.01 2.51-.01 2.85 0 .26.18.58.69.48A10.02 10.02 0 0 0 22 12.14C22 6.58 17.52 2 12 2z" />
        </svg>
        <span>GitHub</span>
      </a>
      <button id="authMenuBtn" class="menu-link auth-menu-link" aria-label="Account">
        <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5z" />
          <path d="M3 22a9 9 0 0 1 18 0" />
        </svg>
        <span id="authMenuLabel">Login</span>
      </button>
    </nav>
  </header>

  <main class="main">
    <aside class="controls">
      <div class="control-section palette-section">
        <button id="paletteToggle" class="palette-toggle" aria-expanded="true" aria-controls="palette">Hide Palette</button>
        <h3 class="section-title">Color Palette</h3>
        <div class="palette" id="palette"></div>
        <div class="selected-color-display">
          <div class="color-preview" id="colorPreview"></div>
          <div class="color-info">
            <span class="color-label">Selected</span>
            <span class="color-code" id="selectedColorLabel">#000000</span>
          </div>
        </div>
      </div>

      <div class="control-section tips-section">
        <h3 class="section-title">Controls</h3>
        <div class="tips">
          <div class="tip">üñ±Ô∏è <strong>Click</strong> to place pixels</div>
          <div class="tip">üîç <strong>Scroll</strong> to zoom</div>
          <div class="tip">‚úã <strong>Drag</strong> to pan</div>
        </div>
      </div>
    </aside>

    <section class="canvas-area">
      <div class="canvas-container">
        <div class="canvas-toolbar">
          <div class="zoom-controls">
            <button class="zoom-btn" id="zoomOut" title="Zoom Out">‚àí</button>
            <span class="zoom-level" id="zoomLevel">100%</span>
            <button class="zoom-btn" id="zoomIn" title="Zoom In">+</button>
            <button class="zoom-btn" id="resetView" title="Reset View">‚ü≤</button>
          </div>
          <div class="canvas-status">
            <div class="canvas-stat" id="turnsDisplay" style="display:none;">
              <span class="stat-icon">üé´</span>
              <span id="turnsCount">0/64</span> turns
            </div>
            <div class="canvas-stat" id="refillTimer" style="display:none;">
              <span class="stat-icon">‚è±Ô∏è</span>
              +1 turn in <span id="refillSeconds">10</span>s
            </div>
            <div class="canvas-stat" id="pixelsDisplay" style="display:none;">
              <span class="stat-icon">üìç</span>
              <span id="pixelsCount">0</span> pixels
            </div>
          </div>
          <div class="canvas-info">
            <span class="canvas-size">128√ó128 Canvas</span>
          </div>
        </div>
        <div id="viewport" class="viewport">
          <canvas id="gridCanvas" class="grid-canvas"></canvas>
          <div id="gridOverlay" class="grid-overlay"></div>
        </div>
      </div>
    </section>
  </main>

  <div id="notification" class="notification"></div>

  <!-- Auth Modal -->
  <div id="authModal" class="auth-modal">
    <div class="auth-modal-content">
      <button class="auth-modal-close" id="authModalClose">√ó</button>
      <h2 class="auth-modal-title" id="authModalTitle">Account</h2>
      <div id="authModalUserInfo" class="auth-modal-user-info" style="display:none;"></div>
      <div id="authModalForms" class="auth-modal-forms">
        <div class="input-group">
          <input id="usernameModal" placeholder="Username" autocomplete="username" />
        </div>
        <div class="input-group">
          <input id="passwordModal" placeholder="Password" type="password" autocomplete="current-password" />
        </div>
        <div class="button-group">
          <button id="btnLoginModal" class="btn btn-primary">Login</button>
          <button id="btnRegModal" class="btn btn-secondary">Register</button>
        </div>
      </div>
      <button id="btnLogoutModal" class="btn btn-logout" style="display:none">Logout</button>
    </div>
  </div>
</body>
</html>
